{"ast":null,"code":"var _jsxFileName = \"/Users/jonwretlind/Dropbox (1)/__Jon/__Jon Project Files/Code Projects/Incisic/incisic-app/src/MyCurve.js\";\nimport './MyCurve.css';\nimport { withStyles } from '@mui/material/styles';\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport Finance from 'financejs';\nimport Tabs from '@mui/material/Tabs';\nimport Typography from '@mui/material/Typography';\nimport Tab from '@mui/material/Tab';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nconst finance = new Finance();\n\nclass MyCurve extends Component {\n  constructor() {\n    super();\n\n    this.changed = event => {\n      var p = document.getElementById('starting_amt').value == \"\" ? this.def.principal : document.getElementById('starting_amt').value;\n      var c = document.getElementById('contributions').value == \"\" ? this.def.contrib : document.getElementById('contributions').value;\n      var y = document.getElementById('years').value == \"\" ? this.def.yrs : document.getElementById('years').value;\n      var rt = document.getElementById('retirement').value == \"\" ? this.def.retire : document.getElementById('retirement').value;\n      var r = document.getElementById('rate').value == \"\" ? this.def.rate : document.getElementById('rate').value;\n      var w = document.getElementById('withdrawal_rt').value == \"\" ? this.def.w_rate : document.getElementById('withdrawal_rt').value;\n      console.log(\"CHANGED: \" + p, c, y, rt, r, w);\n      this.drawChart(p, c, y, rt, r, w);\n    };\n\n    this.def = {\n      principal: 0,\n      contrib: 1500,\n      yrs: 30,\n      retire: 20,\n      rate: 12,\n      w_rate: 4\n    };\n  }\n\n  componentDidMount() {\n    this.drawChart(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate);\n  }\n\n  drawChart(principal, contrib, yrs, retire, rate, w_rate) {\n    //compound curve 1\n    //create a dataset\n    // EOY contributions\n    let dataSet = [];\n\n    for (var n = 0; n < retire; n++) {\n      let r = rate / 100; // convert percentage\n\n      principal += contrib;\n      let bal = principal;\n      let dataBlock = {\n        \"Phase\": \"Accumulation Phase\",\n        \"year\": n,\n        \"contrib\": contrib,\n        \"principal\": finance.FV(r, principal, n),\n        \"retirement\": retire,\n        \"balance\": bal\n      };\n      dataSet.push(dataBlock);\n    } //clear first\n\n\n    d3.select(\"#MyCurve\").selectAll(\"svg\").remove(); //then draw chart canvas\n\n    var vis = d3.select(\"#MyCurve\"),\n        WIDTH = 600,\n        HEIGHT = 400,\n        MARGINS = {\n      top: 50,\n      right: 20,\n      bottom: 50,\n      left: 50\n    };\n    const svg = d3.select(\"#MyCurve\").attr(\"width\", WIDTH).attr(\"height\", HEIGHT);\n    var dataGroup = d3.nest().key(function (d) {\n      return d.Phase;\n    }).entries(dataSet);\n    var lSpace = WIDTH / dataGroup.length; // length of each unit\n\n    var xScale = d3.scaleLinear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([d3.min(dataSet, function (d) {\n      return d.year;\n    }), d3.max(dataSet, function (d) {\n      return d.year;\n    })]);\n    var yScale = d3.scaleLinear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([d3.min(dataSet, function (d) {\n      return d.principal;\n    }), d3.max(dataSet, function (d) {\n      return d.principal;\n    })]);\n    var xAxis = d3.axisBottom(xScale);\n    var yAxis = d3.axisLeft(yScale);\n    var lineGen = d3.line().x(function (d) {\n      return xScale(d.year);\n    }).y(function (d) {\n      return yScale(d.principal);\n    }).curve(d3.curveBasis);\n    dataGroup.forEach(function (d, i) {\n      var theKey = d.key;\n      console.log(theKey, d.year, d.principal);\n      vis.append('svg:path').attr('d', lineGen(d.values)).attr('stroke', function (d, j) {\n        return \"hsl(\" + Math.random() * 360 + \",100%,50%)\";\n      }).attr('stroke-width', 2).attr('id', 'line_' + theKey).attr('fill', 'none');\n      var ll = document.getElementById('Legend');\n      vis.append(\"text\").attr(\"x\", lSpace / 2 - ll.width / 2).attr(\"y\", HEIGHT).style(\"fill\", \"black\").attr(\"id\", \"Legend\").text(d.key).on('click', function () {\n        var active = d.active ? false : true;\n        var opacity = active ? 0 : 1;\n        d3.select(\"#line_\" + d.key).style(\"opacity\", opacity);\n        d.active = active;\n      });\n    });\n    vis.append(\"svg:g\").attr(\"class\", \"axis\").attr(\"transform\", \"translate(0,\" + (HEIGHT - MARGINS.bottom) + \")\").call(xAxis);\n    vis.append(\"svg:g\").attr(\"class\", \"axis\").attr(\"transform\", \"translate(\" + MARGINS.left + \",0)\").call(yAxis);\n    /*  const lineGenerator = d3\n         .line()\n         .x((d) => xScale(xAccessor(d)))\n         .y((d) => yScale(yAccessor(d)))\n         .curve(d3.curveBasis);\n       svg.selectAll(\"rect\")\n          .data(data)\n          .enter()\n          .append(\"path\")\n          .attr(\"x\", (d, i) => i * 70)\n          .attr(\"y\", (d, i) => h - 10 * d)\n          .attr(\"width\", 65)\n          .attr(\"height\", (d, i) => d * 10)\n          .attr(\"fill\", \"green\");\n          */\n  }\n\n  render() {\n    console.log(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate);\n    return /*#__PURE__*/React.createElement(Box, {\n      sx: {\n        flexGrow: 1,\n        bgcolor: 'background.paper',\n        display: 'flex'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"MyCurveDataEntry\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"mycurve-data\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }, \"Starting Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"starting_amt\",\n      placeholder: this.def.principal,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, \"Number of Years Invested\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"years\",\n      placeholder: this.def.yrs,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 19\n      }\n    }, \"Annual Growth Rate (%)\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"rate\",\n      placeholder: this.def.rate,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 19\n      }\n    }, \"Annual Contributions\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"contributions\",\n      placeholder: this.def.contrib,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    }, \"Retirement Year\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"retirement\",\n      placeholder: this.def.retire,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }\n    }, \"Annual Withdrawal Rate (%)\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"withdrawal_rt\",\n      placeholder: this.def.w_rate,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 19\n      }\n    })))))), /*#__PURE__*/React.createElement(\"svg\", {\n      id: \"MyCurve\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default MyCurve;","map":{"version":3,"sources":["/Users/jonwretlind/Dropbox (1)/__Jon/__Jon Project Files/Code Projects/Incisic/incisic-app/src/MyCurve.js"],"names":["withStyles","React","Component","d3","Finance","Tabs","Typography","Tab","Box","Button","finance","MyCurve","constructor","changed","event","p","document","getElementById","value","def","principal","c","contrib","y","yrs","rt","retire","r","rate","w","w_rate","console","log","drawChart","componentDidMount","dataSet","n","bal","dataBlock","FV","push","select","selectAll","remove","vis","WIDTH","HEIGHT","MARGINS","top","right","bottom","left","svg","attr","dataGroup","nest","key","d","Phase","entries","lSpace","length","xScale","scaleLinear","range","domain","min","year","max","yScale","xAxis","axisBottom","yAxis","axisLeft","lineGen","line","x","curve","curveBasis","forEach","i","theKey","append","values","j","Math","random","ll","width","style","text","on","active","opacity","call","render","flexGrow","bgcolor","display"],"mappings":"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","sourcesContent":["import './MyCurve.css';\nimport { withStyles } from '@mui/material/styles';\nimport React, {Component} from 'react';\nimport * as d3 from \"d3\";\nimport Finance from 'financejs';\nimport Tabs from '@mui/material/Tabs';\nimport Typography from '@mui/material/Typography';\nimport Tab from '@mui/material/Tab';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\n\nconst finance = new Finance();\n\nclass MyCurve extends Component {\n  constructor() {\n    super();\n    this.def = {\n          principal: 0,\n          contrib: 1500,\n          yrs: 30,\n          retire: 20,\n          rate: 12,\n          w_rate: 4\n        };\n  }\n\n  componentDidMount() {\n    this.drawChart(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate);\n  }\n\n  drawChart(principal, contrib, yrs, retire, rate, w_rate) {\n    //compound curve 1\n    //create a dataset\n    // EOY contributions\n    let dataSet = [];\n    for (var n = 0; n < retire; n++) {\n      let r = rate/100; // convert percentage\n      principal += contrib;\n      let bal = principal;\n      let dataBlock = {\n          \"Phase\": \"Accumulation Phase\",\n          \"year\": n,\n          \"contrib\": contrib,\n          \"principal\": finance.FV(r, principal, n),\n          \"retirement\": retire,\n          \"balance\": bal\n        }\n        dataSet.push(dataBlock);\n    }\n\n    //clear first\n    d3.select(\"#MyCurve\").selectAll(\"svg\").remove();\n\n    //then draw chart canvas\n    var vis = d3.select(\"#MyCurve\"),\n      WIDTH = 600,\n      HEIGHT = 400,\n      MARGINS = {\n        top: 50,\n        right: 20,\n        bottom: 50,\n        left: 50\n      };\n    const svg = d3.select(\"#MyCurve\")\n                .attr(\"width\", WIDTH)\n                .attr(\"height\", HEIGHT);\n\n    var dataGroup = d3.nest()\n                  .key(function(d) {\n                    return d.Phase;\n                  })\n                  .entries(dataSet);\n\n    var lSpace = WIDTH / dataGroup.length; // length of each unit\n\n    var xScale = d3.scaleLinear()\n      .range([MARGINS.left, WIDTH - MARGINS.right])\n      .domain([d3.min(dataSet, function(d) {\n        return d.year;\n      }), d3.max(dataSet, function(d) {\n        return d.year;\n      })]);\n\n    var yScale = d3.scaleLinear()\n      .range([HEIGHT - MARGINS.top, MARGINS.bottom])\n      .domain([d3.min(dataSet, function(d) {\n        return d.principal;\n      }), d3.max(dataSet, function(d) {\n        return d.principal;\n      })]);\n\n    var xAxis = d3.axisBottom(xScale);\n    var yAxis = d3.axisLeft(yScale);\n\n    var lineGen = d3.line()\n      .x(function(d) {\n        return xScale(d.year);\n      })\n      .y(function(d) {\n        return yScale(d.principal);\n      }).curve(d3.curveBasis);\n\n    dataGroup.forEach(function(d, i) {\n      var theKey = d.key;\n      console.log(theKey, d.year, d.principal);\n      vis.append('svg:path')\n        .attr('d', lineGen(d.values))\n        .attr('stroke', function(d, j) {\n          return \"hsl(\" + Math.random() * 360 + \",100%,50%)\";\n        })\n        .attr('stroke-width', 2)\n        .attr('id', 'line_' + theKey)\n        .attr('fill', 'none');\n\n        var ll = document.getElementById('Legend');\n        vis.append(\"text\")\n          .attr(\"x\", (lSpace / 2) - (ll.width/2))\n          .attr(\"y\", HEIGHT)\n          .style(\"fill\", \"black\")\n          .attr(\"id\", \"Legend\")\n          .text(d.key)\n          .on('click', function() {\n            var active = d.active ? false : true;\n            var opacity = active ? 0 : 1;\n\n            d3.select(\"#line_\" + d.key).style(\"opacity\", opacity);\n\n            d.active = active;\n          });\n\n    });\n\n    vis.append(\"svg:g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", \"translate(0,\" + (HEIGHT - MARGINS.bottom) + \")\")\n      .call(xAxis);\n\n    vis.append(\"svg:g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", \"translate(\" + (MARGINS.left) + \",0)\")\n      .call(yAxis);\n\n  /*  const lineGenerator = d3\n       .line()\n       .x((d) => xScale(xAccessor(d)))\n       .y((d) => yScale(yAccessor(d)))\n       .curve(d3.curveBasis);\n\n    svg.selectAll(\"rect\")\n        .data(data)\n        .enter()\n        .append(\"path\")\n        .attr(\"x\", (d, i) => i * 70)\n        .attr(\"y\", (d, i) => h - 10 * d)\n        .attr(\"width\", 65)\n        .attr(\"height\", (d, i) => d * 10)\n        .attr(\"fill\", \"green\");\n        */\n  }\n\n  changed = (event) => {\n    var p = (document.getElementById('starting_amt').value == \"\")   ? this.def.principal  : document.getElementById('starting_amt').value;\n    var c = (document.getElementById('contributions').value == \"\")  ? this.def.contrib    : document.getElementById('contributions').value;\n    var y = (document.getElementById('years').value == \"\")          ? this.def.yrs        : document.getElementById('years').value;\n    var rt = (document.getElementById('retirement').value == \"\")    ? this.def.retire     : document.getElementById('retirement').value;\n    var r = (document.getElementById('rate').value == \"\")           ? this.def.rate       : document.getElementById('rate').value;\n    var w = (document.getElementById('withdrawal_rt').value == \"\")  ? this.def.w_rate     : document.getElementById('withdrawal_rt').value;\n\n    console.log(\"CHANGED: \" + p, c, y, rt, r, w);\n    this.drawChart(p, c, y, rt, r, w);\n  }\n\n  render() {\n    console.log(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate);\n    return (\n        <Box\n          sx={{ flexGrow: 1, bgcolor: 'background.paper', display: 'flex'}}\n        >\n        <div className=\"container\">\n          <div id=\"MyCurveDataEntry\">\n            <table className=\"mycurve-data\">\n            <tbody>\n              <tr>\n                <td>\n                  <label>Starting Amount</label>\n                  <input  type=\"number\"\n                          id=\"starting_amt\"\n                          placeholder={this.def.principal}\n                          onChange={(event)=>this.changed(event)}/>\n                </td>\n                <td>\n                  <label>Number of Years Invested</label>\n                  <input  type=\"number\"\n                          id=\"years\"\n                          placeholder={this.def.yrs}\n                          onChange={(event)=>this.changed(event)}/>\n                </td>\n                <td>\n                  <label>Annual Growth Rate (%)</label>\n                  <input  type=\"number\"\n                          id=\"rate\"\n                          placeholder={this.def.rate}\n                          onChange={(event)=>this.changed(event)}/>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <label>Annual Contributions</label>\n                  <input  type=\"number\"\n                          id=\"contributions\"\n                          placeholder={this.def.contrib}\n                          onChange={(event)=>this.changed(event)}/>\n                </td>\n                <td>\n                  <label>Retirement Year</label>\n                  <input  type=\"number\"\n                          id=\"retirement\"\n                          placeholder={this.def.retire}\n                          onChange={(event)=>this.changed(event)}/>\n                </td>\n                <td>\n                  <label>Annual Withdrawal Rate (%)</label>\n                  <input  type=\"number\"\n                          id=\"withdrawal_rt\"\n                          placeholder={this.def.w_rate}\n                          onChange={(event)=>this.changed(event)}/>\n                </td>\n              </tr>\n              </tbody>\n            </table>\n            {/*<Button className=\"mycurve-btn\"\n                    variant=\"contained\"\n                    size=\"large\"\n            >\n              See My Curve\n            </Button>*/}\n          </div>\n          <svg id=\"MyCurve\"></svg>\n        </div>\n      </Box>\n    )\n  }\n\n}\n\nexport default MyCurve;\n"]},"metadata":{},"sourceType":"module"}