{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _commonPrefix = _interopRequireDefault(require(\"common-prefix\"));\n\nvar _parsePug = _interopRequireDefault(require(\"./parse-pug\"));\n\nvar _context = _interopRequireDefault(require(\"./context\"));\n\nvar _visitors = require(\"./visitors\");\n\nvar _interpolation = require(\"./utils/interpolation\");\n\nvar _jsx = require(\"./utils/jsx\");\n\nvar _babelTypes = require(\"./lib/babel-types\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst DEFAULT_OPTIONS = {\n  classAttribute: 'className'\n};\n\nfunction _default(babel) {\n  const t = babel.types;\n  (0, _babelTypes.setBabelTypes)(t);\n\n  function isReactPugReference(node) {\n    // TODO: do this better\n    return t.isIdentifier(node, {\n      name: 'pug'\n    });\n  }\n\n  return {\n    visitor: {\n      TaggedTemplateExpression(path, state) {\n        const node = path.node;\n        const _node$quasi = node.quasi,\n              quasis = _node$quasi.quasis,\n              expressions = _node$quasi.expressions;\n\n        if (isReactPugReference(node.tag) && quasis.length >= 1) {\n          let template, interpolationRef;\n\n          if (expressions.length) {\n            const interpolatedTpl = (0, _interpolation.getInterpolatedTemplate)(quasis, expressions);\n            template = interpolatedTpl.template;\n            interpolationRef = interpolatedTpl.interpolationRef;\n          } else {\n            template = quasis[0].value.raw;\n          }\n\n          let src = template.split('\\n');\n          const minIndent = (0, _commonPrefix.default)(src.filter(line => line.trim() !== '').map(line => /^[ \\t]*/.exec(line)[0]));\n          src = src.map(line => line.substr(minIndent.length)).join('\\n');\n          const ast = (0, _parsePug.default)(src);\n\n          const context = _context.default.create(this.file, path, interpolationRef, {\n            options: _objectSpread({}, DEFAULT_OPTIONS, state.opts)\n          });\n\n          const transformed = ast.nodes.map(node => (0, _visitors.visitExpression)(node, context));\n          const expression = transformed.length === 1 ? transformed[0] : (0, _jsx.buildJSXFragment)(transformed);\n          context.variablesToDeclare.forEach(id => {\n            path.scope.push({\n              kind: 'let',\n              id\n            });\n          });\n          path.replaceWith(expression);\n        }\n      }\n\n    }\n  };\n}","map":{"version":3,"sources":["/Users/jonwretlind/Dropbox (1)/__Jon/__Jon Project Files/Code Projects/Incisic/incisic-app/node_modules/babel-plugin-transform-react-pug/dist/index.js"],"names":["Object","defineProperty","exports","value","default","_default","_commonPrefix","_interopRequireDefault","require","_parsePug","_context","_visitors","_interpolation","_jsx","_babelTypes","obj","__esModule","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","configurable","writable","DEFAULT_OPTIONS","classAttribute","babel","t","types","setBabelTypes","isReactPugReference","node","isIdentifier","name","visitor","TaggedTemplateExpression","path","state","_node$quasi","quasi","quasis","expressions","tag","template","interpolationRef","interpolatedTpl","getInterpolatedTemplate","raw","src","split","minIndent","line","trim","map","exec","substr","join","ast","context","create","file","options","opts","transformed","nodes","visitExpression","expression","buildJSXFragment","variablesToDeclare","id","scope","push","kind","replaceWith"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _commonPrefix = _interopRequireDefault(require(\"common-prefix\"));\n\nvar _parsePug = _interopRequireDefault(require(\"./parse-pug\"));\n\nvar _context = _interopRequireDefault(require(\"./context\"));\n\nvar _visitors = require(\"./visitors\");\n\nvar _interpolation = require(\"./utils/interpolation\");\n\nvar _jsx = require(\"./utils/jsx\");\n\nvar _babelTypes = require(\"./lib/babel-types\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst DEFAULT_OPTIONS = {\n  classAttribute: 'className'\n};\n\nfunction _default(babel) {\n  const t = babel.types;\n  (0, _babelTypes.setBabelTypes)(t);\n\n  function isReactPugReference(node) {\n    // TODO: do this better\n    return t.isIdentifier(node, {\n      name: 'pug'\n    });\n  }\n\n  return {\n    visitor: {\n      TaggedTemplateExpression(path, state) {\n        const node = path.node;\n        const _node$quasi = node.quasi,\n              quasis = _node$quasi.quasis,\n              expressions = _node$quasi.expressions;\n\n        if (isReactPugReference(node.tag) && quasis.length >= 1) {\n          let template, interpolationRef;\n\n          if (expressions.length) {\n            const interpolatedTpl = (0, _interpolation.getInterpolatedTemplate)(quasis, expressions);\n            template = interpolatedTpl.template;\n            interpolationRef = interpolatedTpl.interpolationRef;\n          } else {\n            template = quasis[0].value.raw;\n          }\n\n          let src = template.split('\\n');\n          const minIndent = (0, _commonPrefix.default)(src.filter(line => line.trim() !== '').map(line => /^[ \\t]*/.exec(line)[0]));\n          src = src.map(line => line.substr(minIndent.length)).join('\\n');\n          const ast = (0, _parsePug.default)(src);\n\n          const context = _context.default.create(this.file, path, interpolationRef, {\n            options: _objectSpread({}, DEFAULT_OPTIONS, state.opts)\n          });\n\n          const transformed = ast.nodes.map(node => (0, _visitors.visitExpression)(node, context));\n          const expression = transformed.length === 1 ? transformed[0] : (0, _jsx.buildJSXFragment)(transformed);\n          context.variablesToDeclare.forEach(id => {\n            path.scope.push({\n              kind: 'let',\n              id\n            });\n          });\n          path.replaceWith(expression);\n        }\n      }\n\n    }\n  };\n}"]},"metadata":{},"sourceType":"script"}