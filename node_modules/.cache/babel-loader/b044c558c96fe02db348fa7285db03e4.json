{"ast":null,"code":"var _jsxFileName = \"/Users/jonwretlind/Dropbox (1)/__Jon/__Jon Project Files/Code Projects/Incisic/incisic-app/src/RORCalc.js\";\nimport './RORCalc.css';\nimport GoalSeek from './helpers/goalseek.js';\nimport Finance from 'financejs';\nimport ToolTip from './snippets/tooltip.js';\nimport React, { Component } from 'react';\nimport { useEffect } from 'react';\nimport { withStyles } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nconst finance = new Finance();\n\nvar _this;\n\nclass RORCalc extends Component {\n  constructor() {\n    super();\n    this.def = {\n      BOY: 1000,\n      annPay: 1000,\n      mngFee: 1.00,\n      startYear: 1929,\n      numYears: 5,\n      percentStocks: 100,\n      percentBonds: 0,\n      percentTreas: 0,\n      api: \"http://18.188.124.75:5000/all\",\n      econData: null,\n      items: null,\n      histData: [],\n      dataTable: []\n    }; //this.RATE = new RATE();\n\n    this.gs = new GoalSeek();\n    _this = this; //remember to use _this to reference the def variables\n  }\n\n  componentDidMount() {\n    fetch(this.def.api).then(result => {\n      return result.json();\n    }).then(data => {\n      this.def.histData = data; // put the data into global histData array\n\n      console.log(\"data contents ==> \", this.def.histData);\n      var yearIndex;\n\n      for (var i = 0; i <= this.def.histData.length; i++) {\n        if (this.def.histData[i].Year == this.def.startYear) {\n          yearIndex = i;\n          console.log(\"Starting Year: \", this.def.startYear, \"Index: \", yearIndex);\n          break;\n        }\n      }\n\n      var balEOY = 0;\n      var hData = this.def.histData,\n          balBOY = this.def.BOY,\n          annPay = this.def.annPay;\n\n      for (var j = yearIndex; j < yearIndex + this.def.numYears; j++) {\n        var rate = hData[j].SandP,\n            year = hData[j].Year,\n            intRate = +hData[j].SandP.toFixed(2),\n            mngFee = Math.round(this.def.mngFee / 100 * (balBOY + annPay));\n        var fv = Math.round((balBOY + annPay) * (1 + rate / 1) ** 1 - mngFee);\n        console.log(rate);\n\n        if (j > yearIndex) {\n          balBOY = balEOY;\n          fv = Math.round((balBOY + annPay) * (1 + rate / 100 / 1) ** 1 - mngFee);\n          balEOY = fv;\n        } else {\n          balEOY = fv;\n        }\n\n        ;\n        this.def.dataTable.push({\n          index: j,\n          year: year,\n          balBOY: balBOY,\n          intRate: intRate,\n          annPay: annPay,\n          mngFee: mngFee,\n          balEOY: balEOY\n        });\n        this.renderTable(year, balBOY, intRate, annPay, mngFee, balEOY);\n      }\n\n      let pvir = finance.PV(rate / 100, balEOY, 1);\n      let initialValue = this.def.dataTable[0].balBOY;\n      let targetValue = balEOY;\n      const actRor = this.gs.seek(initialValue, this.def.dataTable, targetValue);\n      console.log(\"actRor=\", (actRor * 100).toFixed(2) + \"%\");\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  renderTable(year, balBOY, intRate, annPay, mngFee, balEOY) {\n    //render the table of values for each year\n    // Years from Start\t| Year\t| Balance BOY\t| Interest Rate\t| Annual Payment\t| Management Fee\t| Balance EOY\n    console.log(year, balBOY, intRate, annPay, mngFee, balEOY);\n    let table = document.getElementById('CalcTable');\n    let tableRow = `<div class='row'><div class='year'>${year}</div><div class='balBOY'>${balBOY}</div><div class='intRate'>${intRate}</div><div class='annPay'>${annPay}</div><div class='mngFee'>${mngFee}</div><div class='balEOY'>${balEOY}</div></div>`;\n    table.innerHTML += tableRow;\n  }\n\n  changed(event) {\n    _this.def.BOY = document.getElementById('BOY').value == \"\" ? _this.def.BOY : +document.getElementById('BOY').value;\n    _this.def.annPay = document.getElementById('annPay').value == \"\" ? _this.def.annPay : +document.getElementById('annPay').value;\n    _this.def.mngFee = document.getElementById('mngFee').value == \"\" ? _this.def.mngFee : +document.getElementById('mngFee').value;\n    _this.def.startYear = document.getElementById('startYear').value == \"\" ? _this.def.startYear : +document.getElementById('startYear').value;\n    _this.def.numYears = document.getElementById('numYears').value == \"\" ? _this.def.numYears : +document.getElementById('numYears').value;\n  }\n\n  calculate() {\n    // * @usage RATE($periods, $payment, $present, $future, $type, $guess)\n    var per = _this.def.numYears,\n        cont = _this.def.annualContributions * -1,\n        pv = _this.def.presVal,\n        fv = _this.def.futureVal,\n        balEOY = _this.def.dataTable[_this.def.dataTable.length - 1].balEOY; //var rate = RATE(_this.def.numYears, _this.def.annPay, _this.def.dataTable[0].balBOY, balEOY, 1, 1);\n\n    var calcResult = document.getElementById(\"CalcResult\");\n    var calcLabel = document.getElementById(\"CalcLabel\");\n    calcLabel.innerHTML = \"The Interest Rate is\"; //calcResult.innerHTML = rate.toFixed(2) + \"%\";\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Box, {\n      sx: {\n        flexGrow: 1,\n        bgcolor: 'background.paper',\n        display: 'flex'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"RORCalcWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ror-data columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"input1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    }, \"Present Value \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 40\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"BOY\",\n      placeholder: this.def.BOY,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"input2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, \"Annual Payment \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"annPay\",\n      placeholder: this.def.annPay,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"input3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, \"Management Fee \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"mngFee\",\n      placeholder: this.def.mngFee,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"input4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    }, \"Starting Year \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 40\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"startYear\",\n      placeholder: this.def.startYear,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"input5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, \"Number of Years \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 42\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"numYears\",\n      placeholder: this.def.numYears,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    }, \"PORTFOLIO ALLOCATION\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }\n    }, \"Stock Market (S&P 500) \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 55\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"stocksPortfolio\",\n      placeholder: this.def.percentStocks,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }\n    }, \"Corporate Bonds \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 44\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"bondsPortfolio\",\n      placeholder: this.def.percentBonds,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, \"Government Treasuries  \", /*#__PURE__*/React.createElement(ToolTip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 51\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"treasPortfolio\",\n      placeholder: this.def.percentTreas,\n      onChange: event => this.changed(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }))))), /*#__PURE__*/React.createElement(Button, {\n      className: \"calc-btn\",\n      variant: \"contained\",\n      size: \"large\",\n      onClick: this.calculate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, \"Calculate\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"CalcTable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"CalcLabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"CalcResult\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default RORCalc;","map":{"version":3,"sources":["/Users/jonwretlind/Dropbox (1)/__Jon/__Jon Project Files/Code Projects/Incisic/incisic-app/src/RORCalc.js"],"names":["GoalSeek","Finance","ToolTip","React","Component","useEffect","withStyles","Box","Button","finance","_this","RORCalc","constructor","def","BOY","annPay","mngFee","startYear","numYears","percentStocks","percentBonds","percentTreas","api","econData","items","histData","dataTable","gs","componentDidMount","fetch","then","result","json","data","console","log","yearIndex","i","length","Year","balEOY","hData","balBOY","j","rate","SandP","year","intRate","toFixed","Math","round","fv","push","index","renderTable","pvir","PV","initialValue","targetValue","actRor","seek","catch","error","table","document","getElementById","tableRow","innerHTML","changed","event","value","calculate","per","cont","annualContributions","pv","presVal","futureVal","calcResult","calcLabel","render","flexGrow","bgcolor","display"],"mappings":"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","sourcesContent":["import './RORCalc.css';\nimport GoalSeek from './helpers/goalseek.js';\nimport Finance from 'financejs';\nimport ToolTip from './snippets/tooltip.js';\nimport React, { Component } from 'react';\nimport { useEffect } from 'react';\nimport { withStyles } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\n\nconst finance = new Finance();\nvar _this;\n\nclass RORCalc extends Component {\n  constructor() {\n    super();\n    this.def = {\n      BOY: 1000,\n      annPay: 1000,\n      mngFee: 1.00,\n      startYear: 1929,\n      numYears: 5,\n      percentStocks: 100,\n      percentBonds: 0,\n      percentTreas: 0,\n      api: \"http://18.188.124.75:5000/all\",\n      econData: null,\n      items: null,\n      histData: [],\n      dataTable: [],\n    };\n\n    //this.RATE = new RATE();\n    this.gs = new GoalSeek();\n    _this = this; //remember to use _this to reference the def variables\n  }\n\n  componentDidMount() {\n    fetch(this.def.api)\n      .then(result => {\n        return result.json()\n      })\n      .then(data => {\n        this.def.histData = data; // put the data into global histData array\n        console.log(\"data contents ==> \", this.def.histData);\n        var yearIndex;\n        for (var i = 0; i <= this.def.histData.length; i++) {\n          if (this.def.histData[i].Year == this.def.startYear) {\n            yearIndex = i;\n            console.log(\"Starting Year: \", this.def.startYear, \"Index: \", yearIndex);\n            break;\n          }\n        }\n\n        var balEOY = 0;\n        var hData = this.def.histData,\n          balBOY = this.def.BOY,\n          annPay = this.def.annPay;\n\n        for (var j = yearIndex; j < (yearIndex + this.def.numYears); j++) {\n          var rate = hData[j].SandP,\n            year = hData[j].Year,\n            intRate = +(hData[j].SandP).toFixed(2),\n            mngFee = Math.round((this.def.mngFee / 100) * (balBOY + annPay));\n\n          var fv = Math.round(((balBOY + annPay) * (1 + rate / 1) ** 1) - mngFee);\n          console.log(rate);\n          if (j > yearIndex) {\n            balBOY = balEOY;\n            fv = Math.round(((balBOY + annPay) * (1 + (rate / 100) / 1) ** 1) - mngFee);\n            balEOY = fv;\n          } else {\n            balEOY = fv;\n          };\n\n          this.def.dataTable.push({\n            index: j,\n            year: year,\n            balBOY: balBOY,\n            intRate: intRate,\n            annPay: annPay,\n            mngFee: mngFee,\n            balEOY: balEOY,\n          });\n          this.renderTable(year, balBOY, intRate, annPay, mngFee, balEOY);\n        }\n\n        let pvir = finance.PV(rate / 100, balEOY, 1);\n        let initialValue = this.def.dataTable[0].balBOY;\n        let targetValue = balEOY;\n        const actRor = this.gs.seek(initialValue, this.def.dataTable, targetValue);\n\n        console.log(\"actRor=\", (actRor * 100).toFixed(2) + \"%\");\n\n      }\n      ).catch((error) => {\n        console.log(error)\n      });\n  }\n\n\n\n  renderTable(year, balBOY, intRate, annPay, mngFee, balEOY) {\n    //render the table of values for each year\n    // Years from Start\t| Year\t| Balance BOY\t| Interest Rate\t| Annual Payment\t| Management Fee\t| Balance EOY\n    console.log(year, balBOY, intRate, annPay, mngFee, balEOY);\n    let table = document.getElementById('CalcTable');\n    let tableRow = `<div class='row'><div class='year'>${year}</div><div class='balBOY'>${balBOY}</div><div class='intRate'>${intRate}</div><div class='annPay'>${annPay}</div><div class='mngFee'>${mngFee}</div><div class='balEOY'>${balEOY}</div></div>`;\n    table.innerHTML += tableRow;\n  }\n\n\n  changed(event) {\n    _this.def.BOY = (document.getElementById('BOY').value == \"\") ? _this.def.BOY : +(document.getElementById('BOY').value);\n    _this.def.annPay = (document.getElementById('annPay').value == \"\") ? _this.def.annPay : +(document.getElementById('annPay').value);\n    _this.def.mngFee = (document.getElementById('mngFee').value == \"\") ? _this.def.mngFee : +(document.getElementById('mngFee').value);\n    _this.def.startYear = (document.getElementById('startYear').value == \"\") ? _this.def.startYear : +(document.getElementById('startYear').value);\n    _this.def.numYears = (document.getElementById('numYears').value == \"\") ? _this.def.numYears : +(document.getElementById('numYears').value);\n  }\n\n\n  calculate() {\n    // * @usage RATE($periods, $payment, $present, $future, $type, $guess)\n    var per = _this.def.numYears,\n      cont = _this.def.annualContributions * -1,\n      pv = _this.def.presVal,\n      fv = _this.def.futureVal,\n      balEOY = _this.def.dataTable[_this.def.dataTable.length - 1].balEOY;\n\n    //var rate = RATE(_this.def.numYears, _this.def.annPay, _this.def.dataTable[0].balBOY, balEOY, 1, 1);\n\n    var calcResult = document.getElementById(\"CalcResult\");\n    var calcLabel = document.getElementById(\"CalcLabel\");\n    calcLabel.innerHTML = \"The Interest Rate is\"\n    //calcResult.innerHTML = rate.toFixed(2) + \"%\";\n  }\n\n\n  render() {\n    return (\n      <Box\n        sx={{ flexGrow: 1, bgcolor: 'background.paper', display: 'flex' }}\n      >\n        <div className=\"container\">\n          <div id=\"RORCalcWrapper\">\n            <div className=\"ror-data columns\">\n              <div className=\"col1\">\n                <div id=\"input1\">\n                  <label>Present Value <ToolTip /></label>\n                  <input type=\"number\"\n                    id=\"BOY\"\n                    placeholder={this.def.BOY}\n                    onChange={(event) => this.changed(event)} />\n                </div>\n                <div id=\"input2\">\n                  <label>Annual Payment <ToolTip /></label>\n                  <input type=\"number\"\n                    id=\"annPay\"\n                    placeholder={this.def.annPay}\n                    onChange={(event) => this.changed(event)} />\n                </div>\n                <div id=\"input3\">\n                  <label>Management Fee <ToolTip /></label>\n                  <input type=\"number\"\n                    id=\"mngFee\"\n                    placeholder={this.def.mngFee}\n                    onChange={(event) => this.changed(event)} />\n                </div>\n                <div id=\"input4\">\n                  <label>Starting Year <ToolTip /></label>\n                  <input type=\"number\"\n                    id=\"startYear\"\n                    placeholder={this.def.startYear}\n                    onChange={(event) => this.changed(event)} />\n                </div>\n                <div id=\"input5\">\n                  <label>Number of Years <ToolTip /></label>\n                  <input type=\"number\"\n                    id=\"numYears\"\n                    placeholder={this.def.numYears}\n                    onChange={(event) => this.changed(event)} />\n                </div>\n              </div>\n              <div className=\"col2\">\n                <div className=\"group\">\n                  <h5>PORTFOLIO ALLOCATION</h5>\n                  <div>\n                    <label>Stock Market (S&amp;P 500) <ToolTip /></label>\n                    <input type=\"number\"\n                      id=\"stocksPortfolio\"\n                      placeholder={this.def.percentStocks}\n                      onChange={(event) => this.changed(event)} />\n                  </div>\n                  <div>\n                    <label>Corporate Bonds <ToolTip /></label>\n                    <input type=\"number\"\n                      id=\"bondsPortfolio\"\n                      placeholder={this.def.percentBonds}\n                      onChange={(event) => this.changed(event)} />\n                  </div>\n                  <div>\n                    <label>Government Treasuries  <ToolTip /></label>\n                    <input type=\"number\"\n                      id=\"treasPortfolio\"\n                      placeholder={this.def.percentTreas}\n                      onChange={(event) => this.changed(event)} />\n                  </div>\n                </div>\n              </div>\n            </div>\n            <Button className=\"calc-btn\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={this.calculate}\n            >\n              Calculate\n            </Button>\n          </div>\n          <div>\n            <div id=\"CalcTable\"></div>\n            <div id=\"CalcLabel\"></div>\n            <div id=\"CalcResult\"></div>\n          </div>\n        </div>\n      </Box>\n    )\n  }\n\n}\n\n\nexport default RORCalc;\n"]},"metadata":{},"sourceType":"module"}