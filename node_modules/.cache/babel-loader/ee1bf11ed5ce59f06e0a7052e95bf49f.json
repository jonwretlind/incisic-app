{"ast":null,"code":"var _jsxFileName = \"/Users/jonwretlind/Dropbox (1)/__Jon/__Jon Project Files/Code Projects/Incisic/incisic-app/src/MyCurve.js\";\n\n/* jshint esversion: 8 */\nimport './MyCurve.css';\nimport { withStyles } from '@mui/material/styles';\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport Finance from 'financejs';\nimport Tabs from '@mui/material/Tabs';\nimport Typography from '@mui/material/Typography';\nimport Tab from '@mui/material/Tab';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nconst finance = new Finance();\n\nclass MyCurve extends Component {\n  constructor() {\n    super();\n    this.def = {\n      bal: 0,\n      principal: 0,\n      contrib: 6000,\n      yrs: 50,\n      retire: 20,\n      rate: 8,\n      w_rate: 4,\n      wdraw: 30,\n      blackbox: false\n    };\n  }\n\n  componentDidMount() {\n    this.drawChart(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate, this.def.blackbox);\n  }\n\n  drawChart(principal, contrib, yrs, retire, rate, w_rate, wdraw, blackbox) {\n    //compound curve 1\n    //create a dataset\n    // EOY contributions\n    let dataSet = []; // LOOP to calculate curves1 and create datablocks for the Acc Curve\n\n    for (var n = 0; n < yrs; n++) {\n      let r = rate / 100; // convert percentage\n\n      let _bal = this.def.bal + principal + contrib;\n\n      principal = finance.CI(r, 1, _bal, n); // get the principal at time of retirement for the beginning of the widthdrawal curve\n\n      var retPrincipal;\n      if (n == retire) retPrincipal = principal;\n      let dataBlock = {\n        \"Phase\": \"Accumulation\",\n        \"year\": n,\n        \"contrib\": contrib,\n        \"years\": yrs,\n        \"principal\": finance.FV(r, principal, n),\n        \"retirement\": retire,\n        \"balance\": _bal,\n        \"withdrawal\": wdraw\n      };\n      dataSet.push(dataBlock);\n    } // LOOP to calculate curves2 and create datablocks for the Wd Curve\n\n\n    principal = retPrincipal; // set the starting pt for this curve\n\n    for (var n = retire; n < yrs; n++) {\n      let r = w_rate / 100 * -1; // convert percentage & invert\n\n      let _bal = principal;\n      let wdAmt = principal * r * -1;\n      _bal -= wdAmt;\n      principal = finance.CI(r, 1, _bal, n);\n      r = w_rate / 100; // convert percentage & invert\n\n      _bal = principal; //let amt = principal * r; // add amt of interst\n      //_bal += amt;\n\n      principal = finance.CI(r, 1, _bal, n);\n      let dataBlock = {\n        \"Phase\": \"\",\n        \"year\": n,\n        \"contrib\": wdAmt,\n        \"years\": yrs,\n        \"principal\": finance.FV(r, principal, n),\n        \"retirement\": retire,\n        \"balance\": _bal,\n        \"withdrawal\": wdraw\n      };\n      dataSet.push(dataBlock);\n    } //clear first\n\n\n    d3.select(\"#Canvas\").selectAll(\"path\").remove();\n    d3.select(\"#Canvas\").selectAll(\"g\").remove();\n    d3.select(\"#Canvas\").selectAll(\"rect\").remove();\n    d3.select(\"#Canvas\").selectAll(\"text\").remove(); //then draw chart canvas\n\n    var cv = d3.select(\"#Canvas\"),\n        WIDTH = 800,\n        HEIGHT = 400,\n        MARGINS = {\n      top: 50,\n      right: 20,\n      bottom: 50,\n      left: 60\n    };\n    const svg = d3.select(\"#Canvas\").attr(\"width\", WIDTH).attr(\"height\", HEIGHT);\n    var dataGroup = d3.nest().key(function (d) {\n      return d.Phase;\n    }).entries(dataSet);\n    var dataGroup2 = d3.nest().key(function (d) {\n      return d.Phase;\n    }).entries(dataSet);\n    var lSpace = WIDTH / dataGroup.length; // length of each unit\n\n    var xScale = d3.scaleLinear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([d3.min(dataSet, function (d) {\n      return d.year;\n    }), d3.max(dataSet, function (d) {\n      return d.year;\n    })]);\n    var yScale = d3.scaleLinear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([d3.min(dataSet, function (d) {\n      return d.principal;\n    }), d3.max(dataSet, function (d) {\n      return d.principal;\n    })]);\n    var xAxis = d3.axisBottom(xScale),\n        yAxis = d3.axisLeft(yScale);\n    var lineGen = d3.line().x(function (d) {\n      //if ( d.year > retire+1 ) return;\n      return xScale(d.year);\n    }).y(function (d) {\n      return yScale(d.principal);\n    }).curve(d3.curveBasis);\n    console.log(\"Retirement Year: \" + retire);\n    var Xwd = WIDTH - (MARGINS.right + MARGINS.left),\n        // width of the chart area\n    fudge = 5,\n        // fudge about 5 px\n    ltGreen = \"#def7de\",\n        ghost = \"rgba(255,255,255,0.8)\",\n        accWd = Xwd * (retire / yrs) + fudge,\n        // width of the Accumulation\n    wdWd = Xwd - accWd + yrs + fudge; // width of the Withdrawal\n\n    cv.append('rect').attr(\"x\", MARGINS.left).attr(\"y\", MARGINS.bottom).attr(\"width\", accWd).attr(\"height\", HEIGHT - (MARGINS.top + MARGINS.bottom)).attr(\"fill\", ltGreen);\n    var c1 = [dataGroup[0]];\n    c1.forEach(function (d, i) {\n      cv.append('svg:path').attr('d', lineGen(d.values)).attr('stroke', function (d, j) {\n        return \"hsl(207,80%,40%)\"; //blue\n      }).attr('stroke-width', 2).attr('id', 'line_' + d.key).attr('fill', 'none').attr('width', retire);\n      cv.append(\"text\").attr(\"x\", accWd / 2 - 20).attr(\"y\", HEIGHT).style(\"fill\", \"black\").attr(\"id\", \"Legend\").text(d.key);\n    }); // cover the rest with another rect to gray the curve in bg\n\n    cv.append('rect').attr(\"x\", MARGINS.left + accWd).attr(\"y\", MARGINS.bottom).attr(\"width\", Xwd - accWd).attr(\"height\", HEIGHT - (MARGINS.top + MARGINS.bottom)).attr(\"fill\", ghost); // draw curve 2 widthdrawal\n\n    var c2 = [dataGroup[1]];\n    c2.forEach(function (d, i) {\n      cv.append('svg:path').attr('d', lineGen(d.values)).attr('stroke', function (d, j) {\n        return \"hsl(16, 66%, 44%)\"; //red\n      }).attr('stroke-width', 2).attr('id', 'line_' + d.key).attr('fill', 'none').attr('width', retire);\n      cv.append(\"text\").attr(\"x\", accWd + wdWd / 2 - 10).attr(\"y\", HEIGHT).style(\"fill\", \"black\").attr(\"id\", \"Legend\").text(d.key);\n    });\n    /*\n        /* CHART AXIS */\n\n    cv.append(\"svg:g\").attr(\"class\", \"axis\").attr(\"transform\", \"translate(0,\" + (HEIGHT - MARGINS.bottom) + \")\").call(xAxis);\n    cv.append(\"svg:g\").attr(\"class\", \"axis\").attr(\"transform\", \"translate(\" + MARGINS.left + \",0)\").call(yAxis);\n  }\n\n  calc(event) {\n    var p = document.getElementById('starting_amt').value == \"\" ? parseInt(this.def.principal) : parseInt(document.getElementById('starting_amt').value);\n    var c = document.getElementById('contributions').value == \"\" ? parseInt(this.def.contrib) : parseInt(document.getElementById('contributions').value);\n    var y = document.getElementById('years').value == \"\" ? parseInt(this.def.yrs) : parseInt(document.getElementById('years').value);\n    var rt = document.getElementById('retirement').value == \"\" ? parseInt(this.def.retire) : parseInt(document.getElementById('retirement').value);\n    var r = document.getElementById('rate').value == \"\" ? parseInt(this.def.rate) : parseInt(document.getElementById('rate').value);\n    var w = document.getElementById('withdrawal_rt').value == \"\" ? parseInt(this.def.w_rate) : parseInt(document.getElementById('withdrawal_rt').value);\n    console.log(document.getElementById('blackbox_plan'));\n    var bb = document.getElementById('blackbox_plan').value;\n    console.log(\"CHANGED: \" + p, c, y, rt, r, w, bb);\n    this.drawChart(p, c, y, rt, r, w, bb);\n  }\n\n  render() {\n    console.log(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate, this.def.blackbox);\n    return /*#__PURE__*/React.createElement(Box, {\n      sx: {\n        flexGrow: 1,\n        bgcolor: 'background.paper',\n        display: 'flex'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"MyCurve\",\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"MyCurveDataEntry\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"mycurve-data\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }\n    }, \"Starting Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"starting_amt\",\n      placeholder: this.def.principal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }\n    }, \"Number of Years Invested\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"years\",\n      placeholder: this.def.yrs,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 21\n      }\n    }, \"Annual Growth Rate (%)\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"rate\",\n      placeholder: this.def.rate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }\n    }, \"Annual Contributions\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"contributions\",\n      placeholder: this.def.contrib,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }\n    }, \"Retirement Year\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"retirement\",\n      placeholder: this.def.retire,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 21\n      }\n    }, \"Annual Withdrawal Rate (%)\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"withdrawal_rt\",\n      placeholder: this.def.w_rate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }\n    }, \"Black Box?\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"blackbox_plan\",\n      value: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 21\n      }\n    }))))), /*#__PURE__*/React.createElement(Button, {\n      className: \"mycurve-btn\",\n      variant: \"contained\",\n      size: \"large\",\n      onClick: event => this.calc(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 14\n      }\n    }, \"Calculate My Curve\")), /*#__PURE__*/React.createElement(\"svg\", {\n      id: \"Canvas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default MyCurve;","map":{"version":3,"sources":["/Users/jonwretlind/Dropbox (1)/__Jon/__Jon Project Files/Code Projects/Incisic/incisic-app/src/MyCurve.js"],"names":["withStyles","React","Component","d3","Finance","Tabs","Typography","Tab","Box","Button","finance","MyCurve","constructor","def","bal","principal","contrib","yrs","retire","rate","w_rate","wdraw","blackbox","componentDidMount","drawChart","dataSet","n","r","_bal","CI","retPrincipal","dataBlock","FV","push","wdAmt","select","selectAll","remove","cv","WIDTH","HEIGHT","MARGINS","top","right","bottom","left","svg","attr","dataGroup","nest","key","d","Phase","entries","dataGroup2","lSpace","length","xScale","scaleLinear","range","domain","min","year","max","yScale","xAxis","axisBottom","yAxis","axisLeft","lineGen","line","x","y","curve","curveBasis","console","log","Xwd","fudge","ltGreen","ghost","accWd","wdWd","append","c1","forEach","i","values","j","style","text","c2","call","calc","event","p","document","getElementById","value","parseInt","c","rt","w","bb","render","flexGrow","bgcolor","display"],"mappings":"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","sourcesContent":["/* jshint esversion: 8 */\nimport './MyCurve.css';\nimport { withStyles } from '@mui/material/styles';\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport Finance from 'financejs';\nimport Tabs from '@mui/material/Tabs';\nimport Typography from '@mui/material/Typography';\nimport Tab from '@mui/material/Tab';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\n\nconst finance = new Finance();\n\nclass MyCurve extends Component {\n  constructor() {\n    super();\n    this.def = {\n      bal: 0,\n      principal: 0,\n      contrib: 6000,\n      yrs: 50,\n      retire: 20,\n      rate: 8,\n      w_rate: 4,\n      wdraw: 30,\n      blackbox: false\n    };\n  }\n\n  componentDidMount() {\n    this.drawChart(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate, this.def.blackbox);\n  }\n\n  drawChart(principal, contrib, yrs, retire, rate, w_rate, wdraw, blackbox) {\n    //compound curve 1\n    //create a dataset\n    // EOY contributions\n    let dataSet = [];\n\n    // LOOP to calculate curves1 and create datablocks for the Acc Curve\n    for (var n = 0; n < yrs; n++) {\n      let r = rate / 100; // convert percentage\n      let _bal = this.def.bal + principal + contrib;\n      principal = finance.CI(r, 1, _bal, n);\n\n      // get the principal at time of retirement for the beginning of the widthdrawal curve\n      var retPrincipal; if ( n == retire ) retPrincipal = principal;\n\n      let dataBlock = {\n        \"Phase\": \"Accumulation\",\n        \"year\": n,\n        \"contrib\": contrib,\n        \"years\": yrs,\n        \"principal\": finance.FV(r, principal, n),\n        \"retirement\": retire,\n        \"balance\": _bal,\n        \"withdrawal\": wdraw,\n      }\n      dataSet.push(dataBlock);\n    }\n    // LOOP to calculate curves2 and create datablocks for the Wd Curve\n    principal = retPrincipal; // set the starting pt for this curve\n    for (var n = retire; n < yrs; n++) {\n      let r = w_rate / 100 * -1; // convert percentage & invert\n      let _bal = principal;\n      let wdAmt = principal * r * -1;\n      _bal -= wdAmt;\n      principal = finance.CI(r, 1, _bal, n);\n\n      r = w_rate / 100; // convert percentage & invert\n      _bal = principal;\n      //let amt = principal * r; // add amt of interst\n      //_bal += amt;\n      principal = finance.CI(r, 1, _bal, n);\n\n      let dataBlock = {\n        \"Phase\": \"\",\n        \"year\": n,\n        \"contrib\": wdAmt,\n        \"years\": yrs,\n        \"principal\": finance.FV(r, principal, n),\n        \"retirement\": retire,\n        \"balance\": _bal,\n        \"withdrawal\": wdraw,\n      }\n      dataSet.push(dataBlock);\n    }\n    //clear first\n    d3.select(\"#Canvas\").selectAll(\"path\").remove();\n    d3.select(\"#Canvas\").selectAll(\"g\").remove();\n    d3.select(\"#Canvas\").selectAll(\"rect\").remove();\n    d3.select(\"#Canvas\").selectAll(\"text\").remove();\n\n    //then draw chart canvas\n    var cv = d3.select(\"#Canvas\"),\n      WIDTH = 800,\n      HEIGHT = 400,\n      MARGINS = {\n        top: 50,\n        right: 20,\n        bottom: 50,\n        left: 60\n      };\n    const svg = d3.select(\"#Canvas\")\n      .attr(\"width\", WIDTH)\n      .attr(\"height\", HEIGHT);\n\n    var dataGroup = d3.nest()\n      .key(function (d) { return d.Phase })\n      .entries(dataSet);\n\n    var dataGroup2 = d3.nest()\n      .key(function (d) { return d.Phase })\n      .entries(dataSet);\n\n    var lSpace = WIDTH / dataGroup.length; // length of each unit\n\n    var xScale = d3.scaleLinear()\n      .range([MARGINS.left, WIDTH - MARGINS.right])\n      .domain([d3.min(dataSet, function (d) {\n        return d.year;\n      }), d3.max(dataSet, function (d) {\n        return d.year;\n      })]);\n\n    var yScale = d3.scaleLinear()\n      .range([HEIGHT - MARGINS.top, MARGINS.bottom])\n      .domain([d3.min(dataSet, function (d) {\n        return d.principal;\n      }), d3.max(dataSet, function (d) {\n        return d.principal;\n      })]);\n\n\n    var xAxis = d3.axisBottom(xScale),\n        yAxis = d3.axisLeft(yScale);\n\n    var lineGen = d3.line()\n      .x(function (d) {\n        //if ( d.year > retire+1 ) return;\n        return xScale(d.year);\n      })\n      .y(function (d) {\n        return yScale(d.principal);\n      }).curve(d3.curveBasis);\n\n    console.log(\"Retirement Year: \" + retire)\n\n    var Xwd = WIDTH - (MARGINS.right + MARGINS.left), // width of the chart area\n      fudge = 5, // fudge about 5 px\n      ltGreen = \"#def7de\",\n      ghost = \"rgba(255,255,255,0.8)\",\n      accWd = Xwd * (retire / yrs) + fudge, // width of the Accumulation\n      wdWd = (Xwd - accWd) + yrs + fudge; // width of the Withdrawal\n\n    cv.append('rect')\n      .attr(\"x\", MARGINS.left)\n      .attr(\"y\", MARGINS.bottom)\n      .attr(\"width\", accWd)\n      .attr(\"height\", HEIGHT - (MARGINS.top + MARGINS.bottom))\n      .attr(\"fill\", ltGreen);\n\n    var c1 = [dataGroup[0]];\n    c1.forEach(function (d, i) {\n      cv.append('svg:path')\n        .attr('d', lineGen(d.values))\n        .attr('stroke', function (d, j) {\n          return \"hsl(207,80%,40%)\"; //blue\n        })\n        .attr('stroke-width', 2)\n        .attr('id', 'line_' + d.key)\n        .attr('fill', 'none')\n        .attr('width', retire);\n\n      cv.append(\"text\")\n        .attr(\"x\", (accWd / 2) - 20)\n        .attr(\"y\", HEIGHT)\n        .style(\"fill\", \"black\")\n        .attr(\"id\", \"Legend\")\n        .text(d.key);\n    });\n\n    // cover the rest with another rect to gray the curve in bg\n    cv.append('rect')\n      .attr(\"x\", MARGINS.left + accWd)\n      .attr(\"y\", MARGINS.bottom)\n      .attr(\"width\", Xwd - accWd)\n      .attr(\"height\", HEIGHT - (MARGINS.top + MARGINS.bottom))\n      .attr(\"fill\", ghost);\n\n    // draw curve 2 widthdrawal\n      var c2 = [dataGroup[1]];\n      c2.forEach(function (d, i) {\n        cv.append('svg:path')\n          .attr('d', lineGen(d.values))\n          .attr('stroke', function (d, j) {\n            return \"hsl(16, 66%, 44%)\"; //red\n          })\n          .attr('stroke-width', 2)\n          .attr('id', 'line_' + d.key)\n          .attr('fill', 'none')\n          .attr('width', retire);\n\n        cv.append(\"text\")\n          .attr(\"x\", (accWd + wdWd / 2) - 10)\n          .attr(\"y\", HEIGHT)\n          .style(\"fill\", \"black\")\n          .attr(\"id\", \"Legend\")\n          .text(d.key);\n      });\n/*\n    /* CHART AXIS */\n    cv.append(\"svg:g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", \"translate(0,\" + (HEIGHT - MARGINS.bottom) + \")\")\n      .call(xAxis);\n\n    cv.append(\"svg:g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", \"translate(\" + (MARGINS.left) + \",0)\")\n      .call(yAxis);\n\n  }\n\n  calc(event) {\n    var p = (document.getElementById('starting_amt').value == \"\") ? parseInt(this.def.principal) : parseInt(document.getElementById('starting_amt').value);\n    var c = (document.getElementById('contributions').value == \"\") ? parseInt(this.def.contrib) : parseInt(document.getElementById('contributions').value);\n    var y = (document.getElementById('years').value == \"\") ? parseInt(this.def.yrs) : parseInt(document.getElementById('years').value);\n    var rt = (document.getElementById('retirement').value == \"\") ? parseInt(this.def.retire) : parseInt(document.getElementById('retirement').value);\n    var r = (document.getElementById('rate').value == \"\") ? parseInt(this.def.rate) : parseInt(document.getElementById('rate').value);\n    var w = (document.getElementById('withdrawal_rt').value == \"\") ? parseInt(this.def.w_rate) : parseInt(document.getElementById('withdrawal_rt').value);\n    console.log((document.getElementById('blackbox_plan')));\n    var bb = (document.getElementById('blackbox_plan').value);\n\n    console.log(\"CHANGED: \" + p, c, y, rt, r, w, bb);\n    this.drawChart(p, c, y, rt, r, w, bb);\n  }\n\n  render() {\n    console.log(this.def.principal, this.def.contrib, this.def.yrs, this.def.retire, this.def.rate, this.def.w_rate, this.def.blackbox);\n    return (\n      <Box\n        sx={{ flexGrow: 1, bgcolor: 'background.paper', display: 'flex' }}\n      >\n        <div id=\"MyCurve\" className=\"container\">\n          <div id=\"MyCurveDataEntry\">\n            <table className=\"mycurve-data\">\n              <tbody>\n                <tr>\n                  <td>\n                    <label>Starting Amount</label>\n                    <input type=\"number\"\n                      id=\"starting_amt\"\n                      placeholder={this.def.principal} />\n                  </td>\n                  <td>\n                    <label>Number of Years Invested</label>\n                    <input type=\"number\"\n                      id=\"years\"\n                      placeholder={this.def.yrs} />\n                  </td>\n                  <td>\n                    <label>Annual Growth Rate (%)</label>\n                    <input type=\"number\"\n                      id=\"rate\"\n                      placeholder={this.def.rate} />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <label>Annual Contributions</label>\n                    <input type=\"number\"\n                      id=\"contributions\"\n                      placeholder={this.def.contrib} />\n                  </td>\n                  <td>\n                    <label>Retirement Year</label>\n                    <input type=\"number\"\n                      id=\"retirement\"\n                      placeholder={this.def.retire} />\n                  </td>\n                  <td>\n                    <label>Annual Withdrawal Rate (%)</label>\n                    <input type=\"number\"\n                      id=\"withdrawal_rt\"\n                      placeholder={this.def.w_rate} />\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <label>Black Box?</label>\n                    <input type=\"radio\"\n                      id=\"blackbox_plan\"\n                      value={false}/>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            {<Button className=\"mycurve-btn\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={(event) => this.calc(event)}\n            >\n              Calculate My Curve\n            </Button>}\n          </div>\n          <svg id=\"Canvas\"></svg>\n        </div>\n      </Box>\n    )\n  }\n\n}\n\nexport default MyCurve;\n"]},"metadata":{},"sourceType":"module"}